<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>kali设置酸酸乳</title>
    <url>/2020/08/16/kali%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>由于经常需要在vm中使用kali，并且要大量下载国外资源，所以没有一个滋润的代理<br>是不能忍受的！你要佛系当我没说。。。下面来解决一下这个问题</p>
</blockquote>
<a id="more"></a>

<h2 id="浏览器代理"><a href="#浏览器代理" class="headerlink" title="浏览器代理"></a>浏览器代理</h2><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a><strong>准备工作</strong></h3><blockquote>
<p>有可用的SSR账号，可以选择网上免费分享的账号，或者自己搭建在VPS上搭建。</p>
<p>虚拟机网卡模式为桥接</p>
</blockquote>
<h3 id="下载SSR脚本并安装"><a href="#下载SSR脚本并安装" class="headerlink" title="下载SSR脚本并安装"></a><strong>下载SSR脚本并安装</strong></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://lunamoore.github.io/ssr</span><br><span class="line">mv ssr /usr/<span class="built_in">local</span>/bin</span><br><span class="line">chmod 766 /usr/<span class="built_in">local</span>/bin/ssr</span><br><span class="line">ssr install</span><br><span class="line">ssr config</span><br></pre></td></tr></table></figure>

<h3 id="配置SSR"><a href="#配置SSR" class="headerlink" title="配置SSR"></a><strong>配置SSR</strong></h3><p>一般情况只需要修改以下有注释的地方</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        <span class="attr">&quot;server&quot;</span>: <span class="string">&quot;0.0.0.0&quot;</span>,   <span class="comment">//服务器IP地址</span></span><br><span class="line">        <span class="attr">&quot;server_ipv6&quot;</span>: <span class="string">&quot;::&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;server_port&quot;</span>: <span class="number">2333</span>,  <span class="comment">//端口</span></span><br><span class="line">        <span class="attr">&quot;local_address&quot;</span>: <span class="string">&quot;127.0.0.1&quot;</span>, </span><br><span class="line">        <span class="attr">&quot;local_port&quot;</span>: <span class="number">1080</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;password&quot;</span>,  <span class="comment">//密码</span></span><br><span class="line">        <span class="attr">&quot;method&quot;</span>: <span class="string">&quot;aes-256-cfb&quot;</span>, <span class="comment">//加密方式</span></span><br><span class="line">        <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;auth_aes128_md5&quot;</span>, <span class="comment">//协议</span></span><br><span class="line">        <span class="attr">&quot;protocol_param&quot;</span>: <span class="string">&quot;&quot;</span>,  <span class="comment">//协议参数</span></span><br><span class="line">        <span class="attr">&quot;obfs&quot;</span>: <span class="string">&quot;plain&quot;</span>,  <span class="comment">//混淆</span></span><br><span class="line">        <span class="attr">&quot;obfs_param&quot;</span>: <span class="string">&quot;&quot;</span>,  <span class="comment">//混淆参数</span></span><br><span class="line">        <span class="attr">&quot;speed_limit_per_con&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">&quot;speed_limit_per_user&quot;</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">&quot;additional_ports&quot;</span> : &#123;&#125;, </span><br><span class="line">        <span class="attr">&quot;additional_ports_only&quot;</span> : <span class="literal">false</span>, </span><br><span class="line">        <span class="attr">&quot;timeout&quot;</span>: <span class="number">120</span>,</span><br><span class="line">        <span class="attr">&quot;udp_timeout&quot;</span>: <span class="number">60</span>,</span><br><span class="line">        <span class="attr">&quot;dns_ipv6&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;connect_verbose_info&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">&quot;redirect&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;fast_open&quot;</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="配置代理"><a href="#配置代理" class="headerlink" title="配置代理"></a><strong>配置代理</strong></h3><ul>
<li>以Firefox为例，Chrome上设置类似。</li>
<li>在应用商店找到插件 <code>Proxy SwitchyOmega</code>，添加至Chrome</li>
<li>点击 图标 &gt;&gt; 选项 &gt;&gt; (左边)新建情景模式 ,选第一项 <code>代理服务器</code></li>
</ul>
<img src="/2020/08/16/kali%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/image-20200814192051948.png" class>

<h3 id="设置开机启动"><a href="#设置开机启动" class="headerlink" title="设置开机启动"></a><strong>设置开机启动</strong></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/init.d</span><br><span class="line">touch ssr</span><br><span class="line">chmod +x ssr</span><br><span class="line">vim ssr</span><br></pre></td></tr></table></figure>

<p>其中ssr的内容为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN INIT INFO</span></span><br><span class="line"><span class="comment"># Provides: ssr    // 程序名，唯一。</span></span><br><span class="line"><span class="comment"># Required-Start: $network $remote_fs $local_fs</span></span><br><span class="line"><span class="comment"># Required-Stop: $network $remote_fs $local_fs</span></span><br><span class="line"><span class="comment"># Default-Start: 2 3 4 5</span></span><br><span class="line"><span class="comment"># Default-Stop: 0 1 6</span></span><br><span class="line"><span class="comment"># Short-Description: ssr    // 启动项的简短说明，随心写。</span></span><br><span class="line"><span class="comment"># Description: shadowsocksR    // 启动项的完整说明，随心写。</span></span><br><span class="line"><span class="comment">### END INIT INFO</span></span><br><span class="line"></span><br><span class="line">nohup ssr start &gt;/dev/null 2&gt;&amp;1 &amp; </span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure>

<p>设置为开机自启</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">update-rc.d ssr defaults</span><br></pre></td></tr></table></figure>

<p>删除开机启动</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">update-rc.d -f ssr remove</span><br></pre></td></tr></table></figure>

<p>开机手动开启或关闭</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssr start</span><br><span class="line">ssr stop</span><br><span class="line">ssr uninstall  //卸载</span><br></pre></td></tr></table></figure>

<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a><strong>测试</strong></h3><img src="/2020/08/16/kali%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/image-20200814193445301.png" class>


<h2 id="终端命令行代理"><a href="#终端命令行代理" class="headerlink" title="终端命令行代理"></a>终端命令行代理</h2><h3 id="使用proxychains"><a href="#使用proxychains" class="headerlink" title="使用proxychains"></a>使用proxychains</h3><p><code>proxychains</code>终端命令行代理神器，科学上网，内网穿透渗透必备</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/proxychains.conf</span><br></pre></td></tr></table></figure>

<p>编辑配置文件，某尾修改自己的socks5本地代理地址很端口。</p>
<img src="/2020/08/16/kali%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/image-20200814195018483.png" class>

<h3 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">proxychains curl https://www.google.com</span><br></pre></td></tr></table></figure>

<img src="/2020/08/16/kali%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/image-20200814195221075.png" class>

<h3 id="使用privoxy"><a href="#使用privoxy" class="headerlink" title="使用privoxy"></a>使用privoxy</h3><p>使用Privoxy实现，此方法只有临时生效</p>
<p>首先安装privoxy</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt install -y privoxy</span><br></pre></td></tr></table></figure>

<p>本次使用全局模式。全局模式，将所有http/https请求走代理服务。</p>
<blockquote>
<p>1.添加本地ssr服务到配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt;<span class="built_in">echo</span> <span class="string">&#x27;forward-socks5 / 127.0.0.1:1080 .&#x27;</span> &gt;&gt; /etc/privoxy/config</span><br></pre></td></tr></table></figure>

<p>2.Privoxy 默认监听端口是是8118，每次使用都需要添加如下命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt;<span class="built_in">export</span> http_proxy=http://127.0.0.1:8118</span><br><span class="line">&gt;<span class="built_in">export</span> https_proxy=http://127.0.0.1:8118</span><br><span class="line">&gt;<span class="built_in">export</span> no_proxy=localhost</span><br></pre></td></tr></table></figure>

<p>3.启动服务</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt;systemctl start privoxy.service</span><br><span class="line">&gt;systemctl <span class="built_in">enable</span> privoxy.service</span><br></pre></td></tr></table></figure>

<p>no_proxy是不经过privoxy代理的地址<br>只能填写具体的ip、域名后缀，多个条目之间使用’,’逗号隔开<br>比如: export no_proxy=”localhost, 192.168.1.1, ip.cn, chinaz.com”<br>访问 localhost、192.168.1.1、ip.cn、*.ip.cn、chinaz.com、*.chinaz.com 将不使用代理</p>
</blockquote>
<p>查看出口配置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span></span><br></pre></td></tr></table></figure>

<img src="/2020/08/16/kali%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/image-20200815140327118.png" class>

<h3 id="测试-2"><a href="#测试-2" class="headerlink" title="测试"></a>测试</h3><p>出现网页源码则为成功</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl -sL facebook.com</span><br><span class="line">curl -sL www.baidu.com</span><br><span class="line">curl -sL www.google.com</span><br></pre></td></tr></table></figure>

<img src="/2020/08/16/kali%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/image-20200815140200323.png" class>

<p><a href="https://www.google.com/">Google</a></p>
]]></content>
      <categories>
        <category>kali</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
</search>
